# AGENT_HOOK: dependency-management
services:
  dtrack-apiserver:
    image: dependencytrack/apiserver:4.11.4
    container_name: dtrack-apiserver
    restart: unless-stopped
    ports:
      - "8081:8080"
    environment:
      - DTRACK_DEFAULT_ADMIN_PASSWORD=${DT_ADMIN_PASSWORD:?set DT_ADMIN_PASSWORD in .env}
      - DTRACK_DEFAULT_ADMIN_USERNAME=admin
      - DTRACK_BASE_URL=${DT_BASE_URL:-http://localhost:8081}
    volumes:
      - ./data:/data

  dtrack-frontend:
    image: dependencytrack/frontend:4.11.4
    container_name: dtrack-frontend
    restart: unless-stopped
    ports:
      - "8080:8080"
    environment:
      - API_BASE_URL=${DT_BASE_URL:-http://localhost:8081}
    depends_on:
      - dtrack-apiserver
