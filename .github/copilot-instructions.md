# GitHub Copilot Instructions for n00tropic Cerebrum

> **Agent-facing guide**: See `/AGENTS.md` for the authoritative agent reference.
> This file provides Copilot-specific context; AGENTS.md is the SSoT for all agents.

## Workspace Snapshot

- `n00-cortex/` publishes schemas, manifests, and automation metadata.
  Downstream repos consume its catalogs rather than inventing new ones.
- `n00-frontiers/` regenerates templates from cortex rules, `n00t/` exposes
  automation via MCP, `1. Cerebrum Docs/` records ADRs and releases, and
  `n00tropic/` ships generators that expect those shared assets.
- Flow: update `n00-cortex/data/toolchain-manifest.json`, rerun frontiers
  validators, execute workspace scripts under `.dev/automation/scripts/`, then
  capture the release via `workspace-release.sh` (writes
  `1. Cerebrum Docs/releases.yaml`).
- Generated artefacts such as `n00-cortex/data/exports/**`,
  `n00-frontiers/applications/scaffolder/**`, and
  `n00tropic/06-Shared-Tools/Generated/` are regenerated by commands—never
  hand edited.

## Automation Surface (AI & MCP)

- Use `n00t/capabilities/manifest.json` to discover MCP actions mapping to
  `.dev/automation/scripts/*` (e.g. `meta-check.sh`, `refresh-workspace.sh`,
  `trunk-upgrade.sh`, `workspace-release.sh`).
- Delivery gating now exposes dedicated capabilities:
  - `project.preflight`: capture and run GitHub/ERPNext syncs.
  - Fails fast if required metadata is missing.
    - Required metadata examples:
      - `links[]`
      - `review_date`
      - integration IDs
  - `project.lifecycleRadar`: exports a concise JSON radar of overdue reviews
    and lifecycle totals. It highlights slices that are missing traceability.
  - `project.controlPanel`: refreshes a consolidated Markdown control panel
    with pipeline and planning signals. It helps scan blockers and open jobs.
- Honour workflow stages with `get_workflow_status`, `run_workflow_phase`
  (planning → review), or `run_full_workflow` when the whole pipeline should
  execute.
- Keep planning/architecture phases interactive and implementation/testing
  phases automated so telemetry in
  `.dev/automation/artifacts/automation/agent-runs.json` stays accurate.

## Repo Workflows & Commands

- `n00-cortex/`: Node 20+ (CI pins 24). Run `pnpm install` at the root and in
  `docs/`. Validate with `pnpm test`, `pnpm run validate:schemas`, and
  `pnpm run export:assets -- --check`. When docs move, regenerate via
  `python scripts/generate_docs_manifest.py` then
  `pnpm run validate:docs-manifest`.
- `n00-frontiers/`: Python 3.11 with nox. Install requirements, then run
  `.dev/validate-templates.sh --all` or `nox -s validate_templates_all` after
  touching templates. Consult `docs/CATALOG.md` and `BIBLE.md` when exposing
  assets to automation.
- `n00t/`: pnpm workspace. Use `pnpm install`, `pnpm test`, and `pnpm dev` for
  the control centre UI. Keep `capabilities/` aligned with workspace scripts
  and regenerate shared types via `pnpm run lint:types` when helpers change.
- `n00-dashboard/`: SwiftUI prototype. Use the VS Code task
  `swift: Build All (n00tropic-cerebrum/n00-dashboard)` or run
  `swift build --build-tests` inside `n00-dashboard/`.
- `n00tropic/`: AI design generator. Install with `pip install -r
requirements.txt` and execute `python n00tropic_cli/main.py design generate
--brief <file> --target <dir>`; briefs must validate against cortex schemas.

## Cross-Repo Conventions

- Keep submodules initialised with `git submodule update --init --recursive`
  and use `refresh-workspace.sh` before larger edits.
- Reuse schemas from `n00-cortex/schemas/` and catalogs in
  `n00-cortex/data/catalog/*.json`. Prefer appending new versions over mutating
  historical entries.
- Record structural decisions in `1. Cerebrum Docs/ADR/` and update
  `releases.yaml` through `workspace-release.sh` after downstream tagging.
- Renovate alignment starts in `n00-cortex/data/toolchain-manifest.json`, then
  propagates to repo-specific overrides such as `n00-frontiers/renovate.json`.

## Guardrails & Protected Areas

- Treat `n00tropic/clients/` and shared `artifacts/` directories as
  automation-free zones unless explicitly authorised.
- `.trunk` configs enforce lint/test suites. If CI fails, rerun the documented
  generators instead of patching outputs.
- New automation must update `n00t/capabilities/manifest.json` and store logs
  under `.dev/automation/artifacts/` for observability.
- Frontiers templates embed security gates. When modifying pipelines, cross
  reference `n00-frontiers/control-traceability-matrix.json` to keep controls
  intact.

## AGENTS.md Hierarchy

Each subproject contains an `AGENTS.md` optimised for AI agents. Read the closest
`AGENTS.md` first, falling back to the root for ecosystem context:

| Subproject      | AGENTS.md Path              |
| --------------- | --------------------------- |
| Root workspace  | `/AGENTS.md`                |
| n00-cortex      | `n00-cortex/AGENTS.md`      |
| n00-frontiers   | `n00-frontiers/AGENTS.md`   |
| n00t            | `n00t/AGENTS.md`            |
| n00tropic       | `n00tropic/AGENTS.md`       |
| n00-horizons    | `n00-horizons/AGENTS.md`    |
| n00-school      | `n00-school/AGENTS.md`      |
| n00clear-fusion | `n00clear-fusion/AGENTS.md` |
| n00menon        | `n00menon/AGENTS.md`        |
| n00plicate      | `n00plicate/AGENTS.md`      |
| n00-dashboard   | `n00-dashboard/AGENTS.md`   |
| n00HQ           | `n00HQ/AGENTS.md`           |
| n00man          | `n00man/AGENTS.md`          |

Use the `docs.refresh` capability to validate all AGENTS.md files are present.
